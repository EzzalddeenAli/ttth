<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ttth</title>

    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS -->

    <!-- ttth -->
    <link href="css/ttth/general.css" rel="stylesheet">
    <link href="css/ttth/mainWindow.css" rel="stylesheet">

    <!-- bootstrap -->
    <!-- 4.3.1 -->
    <link href="js/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">

    <!-- noty -->
    <!-- 3.2.0-beta -->
    <link href="js/noty/3.2.0-beta/noty.css" rel="stylesheet">
    <link href="js/noty/3.2.0-beta/themes/bootstrap-v4.css" rel="stylesheet">

    <!-- JAVASCRIPT -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>

    <!-- jquery -->
    <!-- 3.3.1 -->
    <script type="text/javascript" src="js/jquery/3.3.1/jquery-3.3.1.min.js"></script>

    <!-- bootstrap -->
    <!-- 4.3.1 -->
    <script type="text/javascript" src="js/bootstrap/4.3.1/js/bootstrap.min.js" async></script>

    <!-- fontawesome -->
    <!-- 5.8.1 -->
    <script type="text/javascript" src="js/fontawesome-free-web/5.8.1/js/all.min.js" async></script>

    <!-- noty -->
    <!-- 3.2.0-beta -->
    <script type="text/javascript" src="js/noty/3.2.0-beta/noty.min.js" async></script>

    <!-- semver -->
    <!-- 2.0.0 -->
    <script type="text/javascript" src="js/semver/2.0.0/semver.min.js" async></script>

    <!-- modalLoading -->
    <script type="text/javascript" src="js/jquery.modalLoading/modalLoading.js"></script>

    <!-- ttth: general -->
    <script type="text/javascript" src="js/ttth/ttth.js" async></script>
    <!-- ttth: service specific scripts -->
    <script type="text/javascript" src="js/ttth/services/WhatsApp.js" async></script>
</head>

<body>

    <!-- navigation -->
    <nav class="tabs">
        <!-- tabBar -->
        <div id="tabBar" >
            <!-- Tab Names -->
            <ul class="nav nav-tabs" id="myTabs" role="tablist">
                <li class="nav-item small" id="menu_Settings">
                    <a class="nav-link my-ui-text active" id="target_Settings" href="#Settings" role="tab" data-toggle="tab" >
                        <i class="fas fa-cog"></i> <span i18n-text=""></span>
                    </a>
                </li>
            </ul>
            <!-- /Tab Names -->
        </div>
        <!-- /tabBar -->
    </nav>
    <!-- /navigation -->


    <!-- container -->
    <div class="container-fluid h-100 d-flex flex-column fuya">

        <!-- Tab Content -->
        <div class="row flex-fill">

            <!-- Tab panes -->
            <div id="tabPanes" class="tab-content container-fluid ">


                <!-- TabContent: Settings -->
                <div role="tabpanel" class="tab-pane active flex-fill resizer container-fluid bgimg" id="Settings">

                    <div id="allSettings">

                        <!-- About -->
                        <h3 class="my-ui-text" i18n-text="settingsSectionAbout"><!-- About --></h3>
                        <!-- About: Description -->
                        <div>
                            <span class="my-ui-text small" i18n-text="settingsSectionAboutDescription" id="settingsAppDescription"><!-- Description --></span>
                        </div>

                        <!-- List of buttons with links -->
                        <div class="my-ui-text">
                            <a href="#" class="btn btn-outline-secondary btn-sm" i18n-text="settingsSectionAboutButtonReadme" onclick="openURL('https://github.com/yafp/ttth/blob/master/README.md')" title="https://github.com/yafp/ttth/blob/master/README.md"><!-- Readme --></a>
                            <a href="#" class="btn btn-outline-secondary btn-sm" i18n-text="settingsSectionAboutButtonReleases" onclick="openURL('https://github.com/yafp/ttth/releases')" title="https://github.com/yafp/ttth/releases"><!-- Releases --></a>
                            <a href="#" class="btn btn-outline-secondary btn-sm" i18n-text="settingsSectionAboutButtonChangelog" onclick="openURL('https://github.com/yafp/ttth/blob/master/CHANGELOG.md')" title="https://github.com/yafp/ttth/blob/master/CHANGELOG.md"><!-- Changelog --></a>
                            <a href="#" class="btn btn-outline-secondary btn-sm" i18n-text="settingsSectionAboutButtonLicense" onclick="openURL('https://github.com/yafp/ttth/blob/master/LICENSE')" title="https://github.com/yafp/ttth/blob/master/LICENSE"><!-- License --></a>
                            <a href="#" class="btn btn-outline-secondary btn-sm" i18n-text="settingsSectionAboutButtonGitHub" onclick="openURL('https://github.com/yafp/ttth')" title="https://github.com/yafp/ttth"><!-- GitHub --></a>
                            <a href="#" class="btn btn-outline-secondary btn-sm" i18n-text="settingsSectionAboutButtonIssues" onclick="openURL('https://github.com/yafp/ttth/issues')" title="https://github.com/yafp/ttth/issues"><!-- Issues --></a>
                            <a href="#" class="btn btn-outline-danger btn-sm" i18n-text="settingsSectionAboutButtonConsole" onclick="openDevTools();"><!-- Console --></a>
                        </div>
                        <!-- /About -->


                        <!-- new Service Section -->
                        <h3 class="my-ui-text" i18n-text="settingsSectionServicesAdd"><!-- Add service --></h3>
                        <div id="settingsServicesAdd">
                            <div class="input-group mb-3">
                                <select id="select_availableServices"  class="custom-select" name="select_availableServices">
                                    <option value="" disabled selected>Please choose</option>
                                </select>
                                <div class="input-group-append">
                                    <button id="bt_addNewService" type="button" class="btn btn-success btn-sm" onClick="settingsUserAddNewService();">Add</button>
                                </div>
                            </div>
                        </div>

                        <h3 class="my-ui-text" i18n-text="settingsSectionServicesConfigured"><!-- Configured services --></h3>
                        <div id="settingsServicesConfigured">
                            <!-- load dynamic from json file in user data -->
                        </div>
                        <button type="button" class="btn btn-outline-secondary btn-sm" onClick="showUserServicesConfigFolder();" i18n-text="settingsSectionServicesShowConfigsFolder"><!-- Configurations --></button>
                        <!-- /Service Section -->




                        <!-- Startup Options-->
                        <h3 class="my-ui-text" i18n-text="settingsSectionStartup"><!-- Startup options --></h3>

                        <!-- Setting: DefaultView-->
                        <div class="input-group input-group-sm mb-1">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input type="checkbox" aria-label="Checkbox for following text input" checked disabled>
                                </div>
                            </div>
                            <input type="text" class="form-control my-ui-text" aria-label="Text input with checkbox" value="Default view on startup (fallback: Settings)" disabled>

                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <select id="selectDefaultView" name="selectDefaultView">
                                        <option value="dummy" disabled selected>Please choose</option>
                                    </select>
                                </div>
                            </div>

                            <div class="input-group-prepend">
                                <button type="button" class="btn btn-success btn-sm" id="bt_updateDefaultView" title="Set default view" onClick="settingDefaultViewUpdate();"><i class="fas fa-save"></i></button>
                                <button type="button" class="btn btn-danger btn-sm" id="bt_resetDefaultView" title="Reset default view" onClick="settingDefaultViewReset();"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                        <!-- /Setting: DefaultView -->


                        <!-- Setting: Autostart -->
                        <div class="input-group input-group-sm mb-1">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input type="checkbox" id="checkboxSettingAutostart" aria-label="Checkbox for following text input" onClick="settingToggleAutostart();">
                                </div>
                            </div>
                            <input type="text" class="form-control" aria-label="Text input with checkbox" value="Start on login" i18n-text="settingsSectionStartupInfo" disabled>
                        </div>
                        <!-- /Setting: Autostart-->


                        <!-- Setting: AutostartMinimized -->
                        <div class="input-group input-group-sm mb-1">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input type="checkbox" id="checkboxSettingAutostartMinimized" aria-label="Checkbox for following text input" onClick="settingToggleAutostartMinimized();">
                                </div>
                            </div>
                            <input type="text" class="form-control" aria-label="Text input with checkbox" value="Start minimized on login" disabled>
                        </div>
                        <!-- /Setting: AutostartMinimized  -->


                        <!-- Setting: HideMenubarOnStartup -->
                        <div class="input-group input-group-sm mb-1" id="settingsSectionStartupHideMenubar">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input type="checkbox" id="checkboxSettingHideMenubar" aria-label="Checkbox for following text input" onClick="settingToggleMenubarVisibility();">
                                </div>
                            </div>
                            <input type="text" class="form-control" aria-label="Text input with checkbox" value="Hide menubar as default" disabled>
                        </div>
                        <!-- /Setting: HideMenubarOnStartup  -->

                    </div>
                </div>
                <!-- /Tab: Settings -->
            </div>
            <!-- /Tab panes -->
        </div>
        <!-- /Tab Content -->


        <!-- update information -->
        <div class="alert alert-success" role="alert" id="updateInformation">
            <i class="fas fa-spinner fa-spin"></i> checking for updates ...
        </div>
        <!-- update information -->

    </div>
    <!-- container -->

</body>




<script>

$( document ).ready(function()
{
    console.log( "ready!" );

    // hide the entire body on launch. we'll fade it back in later
    $('body').css('display', 'none');

    // start splash
    loading = $(document.body).modalLoading(100, '<img src="img/splash/icon_splash.png">');

    // load the configured services
    loadEnabledUserServices();

    // check operating system
    checkSupportedOperatingSystem();

    // check for updates
    searchUpdate();

    // init the settings tab
    initSettingsPage();

    // Load default view
    //loadDefaultView();

    // Translate using i18next
    localizeUserInterface();

    // fade in the UI (1 sec animation)
    $('body').fadeIn(1000);

    // hide splash
    setInterval(function()
    {
        loading.remove();
    }, 500);

    updateWindowTitle("");

    // execute some things later ...
    setTimeout(function()
    {
        $(document).trigger('afterready');
    }, 1000);

});


$(document).bind('afterready', function()
{
    // call your code here that you want to run after all $(document).ready() calls have run
    setAccesskeysForEnabledServices();

    // validate default view
    validateConfiguredDefaultView();

    // Click handler for navigation/tabs
    //
    // FIXME - this currently only works for static tab (settings) - since #47
    $('#myTabs a').click(function (link)
    {
        var target = link.currentTarget.innerText;

        // remove leading space
        if(target.substr(0,1) == " ") 
        {
            target = target.substr(1);
        }

        console.log("ready ::: Switching to tab: _" + target + "_.");

        // Update window title
        updateWindowTitle(target);

        // do page-specific things
        if(target === "Photos")
        {
            console.log("index.html ::: Ugly hack to fix load issues for Service GooglePhotos");
            serviceGooglePhotosInit("GooglePhotos", "https://photos.google.com/");
        }
    })

});


</script>
